(this["webpackJsonpfirestore-cms-iframe-example"]=this["webpackJsonpfirestore-cms-iframe-example"]||[]).push([[0],{19:function(e,n,t){"use strict";t.r(n);t(5);var i=t(0),o=t.n(i),l=t(3),r=t.n(l),a=t(2),c=t.n(a),d=t(1),s=t.n(d);c.a.prototype.getHTML=function(){return document.querySelector(".ql-editor").innerHTML},c.a.prototype.setHTML=function(e){document.querySelector(".ql-editor").innerHTML=e};var p={};var b=function(){var e=Object(i.useState)(!0),n=e[0],t=e[1],o=Object(i.useState)(),l=o[0],r=o[1];Object(i.useEffect)((function(){window.addEventListener("message",a,!1),setInterval((function(){d()}),1500)}),[]);var a=function(e){e.origin.includes("login.bush_and_beyond")&&"startEdit"===e.data.actionType&&(m(),r(e.data.websiteContent))};Object(i.useEffect)((function(){var e=document.head,n=document.createElement("link");return n.type="text/css",n.rel="stylesheet",n.href="https://cdn.quilljs.com/1.3.6/quill.snow.css",e.appendChild(n),function(){e.removeChild(n)}}),[]);var d=function(){for(var e=0,n=Array.from(document.querySelectorAll(".cp-editable"));e<n.length;e++){var t=n[e];if(!t.querySelector(".cp-editable-btn")){console.log("Adding button");var i=document.createElement("div");i.classList.add("cp-editable-btn-wrapper");var o=document.createElement("div"),l=document.createElement("div");o.textContent="Edit",o.classList.add("cp-editable-btn"),l.classList.add("editor-wrapper");var r=document.createElement("div");r.textContent="Save",r.classList.add("cp-editable-save-btn");var a=document.createElement("div");a.textContent="Cancel",a.classList.add("cp-editable-cancel-btn"),r.onclick=function(e){u(e)},a.onclick=function(e){b(e)},o.onclick=function(e){v(e)},t.appendChild(l),i.appendChild(o),i.appendChild(r),i.appendChild(a),t.appendChild(i)}}},b=function(e){var n=e.target.closest(".cp-editable");n.classList.toggle("editing"),n.querySelector(".ql-toolbar").style.display="none",n.querySelector(".ql-container").style.display="none",n.innerHTML=p[s()(n)].getHTML(),d()},u=function(e){try{var n=e.target.closest(".cp-editable");n.classList.toggle("editing");var t=p[s()(n)].getHTML();console.log("got text: ",t),n.innerHTML=t,console.log(l);var i=l;console.log("Loaded dbObj: ",i);var o=n.id.split(/-|~/g);console.log("el.id: ",n.id),console.log("sections: ",o);var r=g(n);return console.log("Sending: ",o,r),window.parent.postMessage({actionType:"finishedEdit",sections:o,val:r},"*"),d(),Promise.resolve()}catch(e){return Promise.reject(e)}},g=function(e){return console.log("Extracting text from: ",e,e.innerHTML),e.innerHTML},f=[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"]],v=function(e){var n=e.target.closest(".cp-editable");n.classList.toggle("editing");var t=n.innerHTML.indexOf('<div class="editor-wrapper"'),i=n.innerHTML.substring(0,t);if(n.querySelector(".ql-toolbar"))n.querySelector(".ql-toolbar").style.display="block",n.querySelector(".ql-container").style.display="block",n.innerHTML=n.innerHTML.replace(i,""),p[s()(n)].setHTML(i);else{var o=new c.a(n.querySelector(".editor-wrapper"),{modules:{toolbar:f},theme:"snow"});n.innerHTML=n.innerHTML.replace(i,""),o.setHTML(i),p[s()(n)]=o}n.querySelector(".cp-editable-cancel-btn").onclick=function(e){b(e)},n.querySelector(".cp-editable-save-btn").onclick=function(e){u(e)}},m=function(){n||t(!0),d(),document.head.insertAdjacentHTML("beforeend",'\n            <style>\n                .cp-editable {\n                    border: 2px solid black;\n                    position: relative;\n                }\n                .cp-editable::after {\n                    content: "";\n                    background-color: rgba(0,0,0,0.1);\n                    position: absolute;\n                    bottom: 0;\n                    top: 0;\n                    left: 0;\n                    right: 0;\n                    pointer-events: none;\n                }\n                .cp-editable.editing::after {\n                    opacity: 0;\n                }\n                .cp-editable-btn-wrapper {\n                    position: absolute;\n                    /* box-shadow: 0px 0px 2px rgba(255,255,255,0.5); */\n                    z-index: 1;\n                    right: 0;\n                    bottom: -5px;\n                    display: flex;\n                    justify-content: space-evenly;\n                    align-items: center;\n                    transition: all 100ms ease-in-out;\n                }\n                .cp-editable-btn,\n                .cp-editable-save-btn,\n                .cp-editable-cancel-btn {\n                    background-color: black;\n                    color: white;\n                    padding: 2px 4px;\n                    width: 50px;\n                    font-size: 12px;\n                    border-radius: 4px;\n                    border: 1px solid rgba(150,150,150,0.5);\n                    cursor: pointer;\n                    line-height: normal;\n                    font-weight: 200;\n                    margin-left: 5px;\n                }\n                .cp-editable-btn:hover,\n                .cp-editable-save-btn:hover,\n                .cp-editable-cancel-btn:hover {\n                    background-color: rgb(50,50,50);\n                }\n                .cp-editable.editing .cp-editable-btn {\n                    display: none;\n                }\n                .cp-editable .cp-editable-save-btn,\n                .cp-editable .cp-editable-cancel-btn {\n                    display: none;\n                }\n                .cp-editable.editing .cp-editable-save-btn,\n                .cp-editable.editing .cp-editable-cancel-btn {\n                    display: block;\n                }\n            </style>\n        ')};return""},u=function(){return o.a.createElement(b,null)};r.a.render(o.a.createElement(u,null),document.getElementById("root"))},4:function(e,n,t){e.exports=t(19)},5:function(e,n,t){}},[[4,1,2]]]);
//# sourceMappingURL=main.733f03db.chunk.js.map